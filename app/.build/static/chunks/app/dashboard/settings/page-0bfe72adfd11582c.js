(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{4396:function(e,t,s){Promise.resolve().then(s.bind(s,888))},888:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P}});var r=s(7437),a=s(2265),i=s(6070),n=s(2869),l=s(5186),c=s(6815),o=s(7712),d=s(4508);let u=(0,o.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),f=a.forwardRef(({className:e,variant:t,...s},a)=>(0,r.jsx)("div",{ref:a,role:"alert",className:(0,d.cn)(u({variant:t}),e),...s}));f.displayName="Alert",a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h5",{ref:s,className:(0,d.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let m=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,d.cn)("text-sm [&_p]:leading-relaxed",e),...t}));m.displayName="AlertDescription";var p=s(5974),h=s(2339),x=s(1671),y=s(9388),v=s(1817),g=s(9322),j=s(2369),N=s(91),b=s(8906),k=s(6362),w=s(7769),S=s(2208),A=s(9205);let I=(0,A.Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),C=(0,A.Z)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);var T=s(5153),E=s(9731);function P(){let{toast:e}=(0,T.pm)(),[t,s]=(0,a.useState)(""),[o,d]=(0,a.useState)(!1),[u,A]=(0,a.useState)({status:"NOT_CONFIGURED",lastTested:null,hasKey:!1}),[P,Z]=(0,a.useState)(!1),[M,_]=(0,a.useState)(!1),[R,O]=(0,a.useState)(!1);(0,a.useEffect)(()=>{D()},[]);let D=async()=>{try{let e=await fetch("/api/settings/apify-key");if(e.ok){let t=await e.json();A(t)}}catch(e){console.error("Error fetching API key status:",e)}},V=async()=>{if(!t.trim()){e({title:"Error",description:"Please enter your Apify API key",variant:"destructive"});return}O(!0);try{let r=await fetch("/api/settings/apify-key",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:t.trim()})}),a=await r.json();r.ok?(e({title:"Success",description:a.message||"API key saved and tested successfully"}),s(""),D()):e({title:"Error",description:a.error||"Failed to save API key",variant:"destructive"})}catch(t){e({title:"Error",description:"Failed to save API key",variant:"destructive"})}finally{O(!1)}},z=async()=>{_(!0);try{let t=await fetch("/api/settings/apify-key/test",{method:"POST"}),s=await t.json();t.ok?(e({title:s.isValid?"Success":"Error",description:s.message,variant:s.isValid?"default":"destructive"}),D()):e({title:"Error",description:s.error||"Failed to test API key",variant:"destructive"})}catch(t){e({title:"Error",description:"Failed to test API key connection",variant:"destructive"})}finally{_(!1)}},F=async()=>{Z(!0);try{(await fetch("/api/settings/apify-key",{method:"DELETE"})).ok?(e({title:"Success",description:"API key removed successfully"}),s(""),D()):e({title:"Error",description:"Failed to remove API key",variant:"destructive"})}catch(t){e({title:"Error",description:"Failed to remove API key",variant:"destructive"})}finally{Z(!1)}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Configure your CCC Pipeline system settings and integrations"})]}),(0,r.jsxs)(h.mQ,{defaultValue:"profile",className:"space-y-6",children:[(0,r.jsxs)(h.dr,{className:"grid w-full grid-cols-2",children:[(0,r.jsxs)(h.SP,{value:"profile",className:"flex items-center gap-2",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),"Profile Management"]}),(0,r.jsxs)(h.SP,{value:"api",className:"flex items-center gap-2",children:[(0,r.jsx)(N.Z,{className:"h-4 w-4"}),"API Configuration"]})]}),(0,r.jsx)(h.nU,{value:"profile",className:"space-y-6",children:(0,r.jsx)(E.Z,{onSuccess:()=>{e({title:"Success",description:"Profile updated successfully!"})}})}),(0,r.jsx)(h.nU,{value:"api",className:"space-y-6",children:(0,r.jsxs)(i.Zb,{className:"border-0 shadow-sm",children:[(0,r.jsx)(i.Ol,{className:"pb-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"bg-blue-100 p-2 rounded-lg",children:(0,r.jsx)(N.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.ll,{className:"text-xl",children:"Apify API Integration"}),(0,r.jsx)(i.SZ,{children:"Configure your personal Apify API key to access live healthcare business data"})]})]})}),(0,r.jsxs)(i.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:"Current Status"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:u.lastTested?`Last tested: ${new Date(u.lastTested).toLocaleString()}`:"Never tested"})]}),(e=>{switch(e){case"VALID":return(0,r.jsxs)(p.C,{variant:"default",className:"bg-green-100 text-green-800 border-green-200",children:[(0,r.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),"Valid"]});case"INVALID":return(0,r.jsxs)(p.C,{variant:"destructive",children:[(0,r.jsx)(y.Z,{className:"h-3 w-3 mr-1"}),"Invalid"]});case"TESTING":return(0,r.jsxs)(p.C,{variant:"secondary",children:[(0,r.jsx)(v.Z,{className:"h-3 w-3 mr-1 animate-spin"}),"Testing"]});case"EXPIRED":return(0,r.jsxs)(p.C,{variant:"outline",className:"border-orange-200 text-orange-700",children:[(0,r.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"Expired"]});default:return(0,r.jsxs)(p.C,{variant:"outline",children:[(0,r.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"Not Configured"]})}})(u.status)]}),(0,r.jsxs)(f,{children:[(0,r.jsx)(b.Z,{className:"h-4 w-4"}),(0,r.jsx)(m,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"font-medium",children:"How to get your Apify API key:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[(0,r.jsxs)("li",{children:["Go to"," ",(0,r.jsxs)("a",{href:"https://console.apify.com/account/integrations",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 inline-flex items-center",children:["Apify Console â†’ Integrations",(0,r.jsx)(k.Z,{className:"h-3 w-3 ml-1"})]})]}),(0,r.jsx)("li",{children:'Click "Create new token" and give it a name'}),(0,r.jsx)("li",{children:'Copy the generated API key (starts with "apify_api_")'}),(0,r.jsx)("li",{children:'Paste it below and click "Save & Test"'})]})]})})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(c._,{htmlFor:"apiKey",className:"text-sm font-medium",children:"Apify API Key"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(l.I,{id:"apiKey",type:o?"text":"password",value:t,onChange:e=>s(e.target.value),placeholder:"apify_api_...",className:"pr-10"}),(0,r.jsx)("button",{type:"button",onClick:()=>d(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?(0,r.jsx)(w.Z,{className:"h-4 w-4"}):(0,r.jsx)(S.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)(n.z,{onClick:V,disabled:!t.trim()||R,className:"shrink-0",children:[R?(0,r.jsx)(v.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,r.jsx)(I,{className:"h-4 w-4 mr-2"}),"Save & Test"]})]})]}),u.hasKey&&(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)(n.z,{variant:"outline",onClick:z,disabled:M||"TESTING"===u.status,size:"sm",children:[M?(0,r.jsx)(v.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,r.jsx)(C,{className:"h-4 w-4 mr-2"}),"Test Connection"]}),(0,r.jsxs)(n.z,{variant:"outline",onClick:F,disabled:P,size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50",children:[P?(0,r.jsx)(v.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Remove Key"]})]}),(0,r.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"bg-blue-100 p-1 rounded",children:(0,r.jsx)(N.Z,{className:"h-4 w-4 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1 text-sm",children:[(0,r.jsx)("div",{className:"font-medium text-blue-900 mb-1",children:"Data Source Impact"}),(0,r.jsxs)("div",{className:"text-blue-700 space-y-1",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"With API key:"})," Research dashboard will scrape live healthcare businesses from Google Maps"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Without API key:"})," Research dashboard will use sample/mock data for demonstration"]})]})]})]})}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 bg-gray-50 p-3 rounded",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[(0,r.jsx)(b.Z,{className:"h-3 w-3"}),(0,r.jsx)("span",{className:"font-medium",children:"Security Notice"})]}),"Your API key is encrypted and stored securely. It's only used for authenticated requests to Apify's service and is never shared with third parties."]})]})]})})]})]})}},2339:function(e,t,s){"use strict";s.d(t,{SP:function(){return o},dr:function(){return c},mQ:function(){return l},nU:function(){return d}});var r=s(7437),a=s(2265),i=s(1312),n=s(4508);let l=i.fC,c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.aV,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));c.displayName=i.aV.displayName;let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.xz,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));o.displayName=i.xz.displayName;let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.VY,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));d.displayName=i.VY.displayName},5153:function(e,t,s){"use strict";s.d(t,{pm:function(){return f}});var r=s(2265);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function u({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function f(){let[e,t]=r.useState(o);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9388:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},91:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},6362:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},7769:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8906:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},6741:function(e,t,s){"use strict";function r(e,t,{checkForDefaultPrevented:s=!0}={}){return function(r){if(e?.(r),!1===s||!r.defaultPrevented)return t?.(r)}}s.d(t,{M:function(){return r}})},7822:function(e,t,s){"use strict";s.d(t,{B:function(){return c}});var r=s(2265),a=s(3966),i=s(8575),n=s(7053),l=s(7437);function c(e){let t=e+"CollectionProvider",[s,c]=(0,a.b)(t),[o,d]=s(t,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:t,children:s}=e,a=r.useRef(null),i=r.useRef(new Map).current;return(0,l.jsx)(o,{scope:t,itemMap:i,collectionRef:a,children:s})};u.displayName=t;let f=e+"CollectionSlot",m=r.forwardRef((e,t)=>{let{scope:s,children:r}=e,a=d(f,s),c=(0,i.e)(t,a.collectionRef);return(0,l.jsx)(n.g7,{ref:c,children:r})});m.displayName=f;let p=e+"CollectionItemSlot",h="data-radix-collection-item",x=r.forwardRef((e,t)=>{let{scope:s,children:a,...c}=e,o=r.useRef(null),u=(0,i.e)(t,o),f=d(p,s);return r.useEffect(()=>(f.itemMap.set(o,{ref:o,...c}),()=>void f.itemMap.delete(o))),(0,l.jsx)(n.g7,{[h]:"",ref:u,children:a})});return x.displayName=p,[{Provider:u,Slot:m,ItemSlot:x},function(t){let s=d(e+"CollectionConsumer",t);return r.useCallback(()=>{let e=s.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(s.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[s.collectionRef,s.itemMap])},c]}},3966:function(e,t,s){"use strict";s.d(t,{b:function(){return i}});var r=s(2265),a=s(7437);function i(e,t=[]){let s=[],i=()=>{let t=s.map(e=>r.createContext(e));return function(s){let a=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return i.scopeName=e,[function(t,i){let n=r.createContext(i),l=s.length;function c(t){let{scope:s,children:i,...c}=t,o=s?.[e][l]||n,d=r.useMemo(()=>c,Object.values(c));return(0,a.jsx)(o.Provider,{value:d,children:i})}return s=[...s,i],c.displayName=t+"Provider",[c,function(s,a){let c=a?.[e][l]||n,o=r.useContext(c);if(o)return o;if(void 0!==i)return i;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=s.reduce((t,{useScope:s,scopeName:r})=>{let a=s(e)[`__scope${r}`];return{...t,...a}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return s.scopeName=t.scopeName,s}(i,...t)]}},9114:function(e,t,s){"use strict";s.d(t,{gm:function(){return i}});var r=s(2265);s(7437);var a=r.createContext(void 0);function i(e){let t=r.useContext(a);return e||t||"ltr"}},9255:function(e,t,s){"use strict";s.d(t,{M:function(){return c}});var r,a=s(2265),i=s(1188),n=(r||(r=s.t(a,2)))["useId".toString()]||(()=>void 0),l=0;function c(e){let[t,s]=a.useState(n());return(0,i.b)(()=>{e||s(e=>e??String(l++))},[e]),e||(t?`radix-${t}`:"")}},6606:function(e,t,s){"use strict";s.d(t,{W:function(){return a}});var r=s(2265);function a(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...e)=>t.current?.(...e),[])}},886:function(e,t,s){"use strict";s.d(t,{T:function(){return i}});var r=s(2265),a=s(6606);function i({prop:e,defaultProp:t,onChange:s=()=>{}}){let[i,n]=function({defaultProp:e,onChange:t}){let s=r.useState(e),[i]=s,n=r.useRef(i),l=(0,a.W)(t);return r.useEffect(()=>{n.current!==i&&(l(i),n.current=i)},[i,n,l]),s}({defaultProp:t,onChange:s}),l=void 0!==e,c=l?e:i,o=(0,a.W)(s);return[c,r.useCallback(t=>{if(l){let s="function"==typeof t?t(e):t;s!==e&&o(s)}else n(t)},[l,e,n,o])]}},1188:function(e,t,s){"use strict";s.d(t,{b:function(){return a}});var r=s(2265),a=globalThis?.document?r.useLayoutEffect:()=>{}}},function(e){e.O(0,[73,312,294,731,971,117,744],function(){return e(e.s=4396)}),_N_E=e.O()}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731],{9731:function(e,s,a){a.d(s,{Z:function(){return w}});var t=a(7437),r=a(2265),l=a(2869),i=a(5186),n=a(6815),d=a(6070),o=a(5156),c=a(4508);let m=r.forwardRef(({className:e,orientation:s="horizontal",decorative:a=!0,...r},l)=>(0,t.jsx)(o.f,{ref:l,decorative:a,orientation:s,className:(0,c.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));m.displayName=o.f.displayName;var u=a(5974),f=a(4438),p=a(2369),x=a(1671),h=a(9322),g=a(9345),v=a(3041),j=a(8420),N=a(5005),b=a(9202),y=a(3774);function w({onSuccess:e,isInitialSetup:s=!1}){let[a,o]=(0,r.useState)({firstName:"",lastName:"",email:"",jobTitle:"",company:"",phone:"",address:"",city:"",state:"",zipCode:"",website:""}),[c,w]=(0,r.useState)(!1),[C,Z]=(0,r.useState)(!0),[S,I]=(0,r.useState)({});(0,r.useEffect)(()=>{_()},[]);let _=async()=>{try{Z(!0);let e=await fetch("/api/profile");if(e.ok){let s=await e.json();s.success&&s.data&&o({firstName:s.data.firstName||"",lastName:s.data.lastName||"",email:s.data.email||"",jobTitle:s.data.jobTitle||"",company:s.data.company||"",phone:s.data.phone||"",address:s.data.address||"",city:s.data.city||"",state:s.data.state||"",zipCode:s.data.zipCode||"",website:s.data.website||"",profileSetupComplete:s.data.profileSetupComplete})}}catch(e){console.error("Error fetching profile:",e)}finally{Z(!1)}},F=()=>{let e={};return a.firstName.trim()||(e.firstName="First name is required"),a.lastName.trim()||(e.lastName="Last name is required"),a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(e.email="Please enter a valid email address"):e.email="Email is required",a.website&&!/^https?:\/\/.+/.test(a.website)&&(e.website="Website must start with http:// or https://"),I(e),0===Object.keys(e).length},k=async s=>{if(s.preventDefault(),!F()){f.Am.error("Please fix the errors in the form");return}w(!0),I({});try{let s=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await s.json();if(s.ok&&t.success)f.Am.success(t.message||"Profile updated successfully!"),e?.();else{if(t.details){let e={};t.details.forEach(s=>{s.path&&s.path.length>0&&(e[s.path[0]]=s.message)}),I(e)}f.Am.error(t.error||"Failed to update profile")}}catch(e){console.error("Error updating profile:",e),f.Am.error("An unexpected error occurred")}finally{w(!1)}},z=(e,s)=>{o(a=>({...a,[e]:s})),S[e]&&I(s=>({...s,[e]:""}))};return C?(0,t.jsxs)(d.Zb,{className:"w-full max-w-4xl mx-auto",children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-5 w-5"}),"Loading Profile..."]})}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:Array.from({length:6}).map((e,s)=>(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-1/4 mb-2"}),(0,t.jsx)("div",{className:"h-10 bg-muted rounded"})]},s))})})]}):(0,t.jsxs)(d.Zb,{className:"w-full max-w-4xl mx-auto",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)(d.ll,{children:s?"Complete Your Profile Setup":"Profile Management"})]}),a.profileSetupComplete&&!s&&(0,t.jsxs)(u.C,{variant:"secondary",className:"flex items-center gap-1",children:[(0,t.jsx)(x.Z,{className:"h-3 w-3"}),"Complete"]})]}),(0,t.jsx)(d.SZ,{children:s?"Set up your profile to personalize your PipelinePro OS experience.":"Update your personal and business information."})]}),(0,t.jsx)(d.aY,{children:(0,t.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2 mb-4",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"}),"Personal Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n._,{htmlFor:"firstName",children:"First Name *"}),(0,t.jsx)(i.I,{id:"firstName",value:a.firstName,onChange:e=>z("firstName",e.target.value),className:S.firstName?"border-destructive":"",placeholder:"Enter your first name"}),S.firstName&&(0,t.jsxs)("p",{className:"text-sm text-destructive mt-1 flex items-center gap-1",children:[(0,t.jsx)(h.Z,{className:"h-3 w-3"}),S.firstName]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n._,{htmlFor:"lastName",children:"Last Name *"}),(0,t.jsx)(i.I,{id:"lastName",value:a.lastName,onChange:e=>z("lastName",e.target.value),className:S.lastName?"border-destructive":"",placeholder:"Enter your last name"}),S.lastName&&(0,t.jsxs)("p",{className:"text-sm text-destructive mt-1 flex items-center gap-1",children:[(0,t.jsx)(h.Z,{className:"h-3 w-3"}),S.lastName]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(n._,{htmlFor:"email",children:"Email Address *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.I,{id:"email",type:"email",value:a.email,onChange:e=>z("email",e.target.value),className:`pl-10 ${S.email?"border-destructive":""}`,placeholder:"Enter your email address"})]}),S.email&&(0,t.jsxs)("p",{className:"text-sm text-destructive mt-1 flex items-center gap-1",children:[(0,t.jsx)(h.Z,{className:"h-3 w-3"}),S.email]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(n._,{htmlFor:"phone",children:"Phone Number"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.I,{id:"phone",value:a.phone,onChange:e=>z("phone",e.target.value),className:"pl-10",placeholder:"(555) 123-4567"})]})]})]})]}),(0,t.jsx)(m,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2 mb-4",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4"}),"Business Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n._,{htmlFor:"jobTitle",children:"Job Title"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.I,{id:"jobTitle",value:a.jobTitle,onChange:e=>z("jobTitle",e.target.value),className:"pl-10",placeholder:"e.g., Loan Officer, Business Development Manager"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n._,{htmlFor:"company",children:"Company"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.I,{id:"company",value:a.company,onChange:e=>z("company",e.target.value),className:"pl-10",placeholder:"Commercial Capital Connect"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(n._,{htmlFor:"website",children:"Website"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(b.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.I,{id:"website",value:a.website,onChange:e=>z("website",e.target.value),className:`pl-10 ${S.website?"border-destructive":""}`,placeholder:"https://example.com"})]}),S.website&&(0,t.jsxs)("p",{className:"text-sm text-destructive mt-1 flex items-center gap-1",children:[(0,t.jsx)(h.Z,{className:"h-3 w-3"}),S.website]})]})]})]}),(0,t.jsx)(m,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2 mb-4",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),"Address Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(n._,{htmlFor:"address",children:"Street Address"}),(0,t.jsx)(i.I,{id:"address",value:a.address,onChange:e=>z("address",e.target.value),placeholder:"123 Main Street"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n._,{htmlFor:"city",children:"City"}),(0,t.jsx)(i.I,{id:"city",value:a.city,onChange:e=>z("city",e.target.value),placeholder:"Los Angeles"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n._,{htmlFor:"state",children:"State"}),(0,t.jsx)(i.I,{id:"state",value:a.state,onChange:e=>z("state",e.target.value),placeholder:"CA"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n._,{htmlFor:"zipCode",children:"ZIP Code"}),(0,t.jsx)(i.I,{id:"zipCode",value:a.zipCode,onChange:e=>z("zipCode",e.target.value),placeholder:"90210"})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end gap-3 pt-6",children:(0,t.jsx)(l.z,{type:"submit",disabled:c,className:"min-w-[120px]",children:c?"Saving...":s?"Complete Setup":"Update Profile"})})]})})]})}},5974:function(e,s,a){a.d(s,{C:function(){return n}});var t=a(7437);a(2265);var r=a(7712),l=a(4508);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...a}){return(0,t.jsx)("div",{className:(0,l.cn)(i({variant:s}),e),...a})}},2869:function(e,s,a){a.d(s,{z:function(){return o}});var t=a(7437),r=a(2265),l=a(7053),i=a(7712),n=a(4508);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:s,size:a,asChild:r=!1,...i},o)=>{let c=r?l.g7:"button";return(0,t.jsx)(c,{className:(0,n.cn)(d({variant:s,size:a,className:e})),ref:o,...i})});o.displayName="Button"},6070:function(e,s,a){a.d(s,{Ol:function(){return n},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});var t=a(7437),r=a(2265),l=a(4508);let i=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let n=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let c=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},5186:function(e,s,a){a.d(s,{I:function(){return i}});var t=a(7437),r=a(2265),l=a(4508);let i=r.forwardRef(({className:e,type:s,...a},r)=>(0,t.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));i.displayName="Input"},6815:function(e,s,a){a.d(s,{_:function(){return o}});var t=a(7437),r=a(2265),l=a(6394),i=a(7712),n=a(4508);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.f,{ref:a,className:(0,n.cn)(d(),e),...s}));o.displayName=l.f.displayName},4508:function(e,s,a){a.d(s,{cn:function(){return l}});var t=a(1994),r=a(3335);function l(...e){return(0,r.m6)((0,t.W)(e))}}}]);
"use strict";(()=>{var e={};e.id=616,e.ids=[616],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},74175:e=>{e.exports=require("tty")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},70612:e=>{e.exports=require("node:os")},47261:e=>{e.exports=require("node:util")},65628:e=>{e.exports=require("node:zlib")},19606:(e,i,s)=>{s.r(i),s.d(i,{originalPathname:()=>_,patchFetch:()=>v,requestAsyncStorage:()=>R,routeModule:()=>A,serverHooks:()=>N,staticGenerationAsyncStorage:()=>b});var a={};s.r(a),s.d(a,{GET:()=>I,dynamic:()=>T});var t=s(49303),r=s(88716),n=s(60670),o=s(87070),u=s(47291),l=s(53524),c=s(84770),d=s.n(c);let y=new l.PrismaClient,p=process.env.ENCRYPTION_KEY||"default-key-replace-in-production-32chars";async function m(e){try{let i=await y.user.findUnique({where:{email:e},select:{apifyApiKey:!0,apifyKeyStatus:!0}});if(!i?.apifyApiKey||"VALID"!==i.apifyKeyStatus)return{client:null,hasValidKey:!1};let s=function(e){let i=d().createDecipher("aes-256-cbc",p),s=i.update(e,"hex","utf8");return s+=i.final("utf8")}(i.apifyApiKey);return{client:new u.wR({token:s}),hasValidKey:!0}}catch(e){return console.error("Error getting user Apify client:",e),{client:null,hasValidKey:!1}}}let g=process.env.APIFY_API_TOKEN?new u.wR({token:process.env.APIFY_API_TOKEN}):null;async function E(e,i,s){try{let a=(()=>{switch(e){case"RESTAURANT_FOOD_SERVICE":return{actorId:"apify/google-maps-scraper",input:{queries:[`restaurants in ${i}`,`cafes in ${i}`,`food service in ${i}`],maxPlacesPerQuery:10,searchMode:"PLACES_AND_REVIEWS",includeWebsite:!0,includePhoneNumber:!0,skipClosedPlaces:!0,placeMinimumRating:0,language:"en",countryCode:"US"}};case"HEALTHCARE":return{actorId:"apify/google-maps-scraper",input:{queries:[`medical clinics in ${i}`,`doctors offices in ${i}`,`dental offices in ${i}`],maxPlacesPerQuery:10,searchMode:"PLACES_AND_REVIEWS",includeWebsite:!0,includePhoneNumber:!0,language:"en",countryCode:"US"}};case"BEAUTY_WELLNESS":return{actorId:"apify/google-maps-scraper",input:{queries:[`beauty salons in ${i}`,`spas in ${i}`,`nail salons in ${i}`],maxPlacesPerQuery:10,searchMode:"PLACES_AND_REVIEWS",includeWebsite:!0,includePhoneNumber:!0,language:"en",countryCode:"US"}};case"AUTOMOTIVE_SERVICES":return{actorId:"apify/google-maps-scraper",input:{queries:[`auto repair shops in ${i}`,`car mechanics in ${i}`,`tire shops in ${i}`],maxPlacesPerQuery:10,searchMode:"PLACES_AND_REVIEWS",includeWebsite:!0,includePhoneNumber:!0,language:"en",countryCode:"US"}};case"FITNESS_RECREATION":return{actorId:"apify/google-maps-scraper",input:{queries:[`gyms in ${i}`,`fitness centers in ${i}`,`yoga studios in ${i}`],maxPlacesPerQuery:10,searchMode:"PLACES_AND_REVIEWS",includeWebsite:!0,includePhoneNumber:!0,language:"en",countryCode:"US"}};case"PET_SERVICES":return{actorId:"apify/google-maps-scraper",input:{queries:[`pet stores in ${i}`,`veterinarians in ${i}`,`pet grooming in ${i}`],maxPlacesPerQuery:10,searchMode:"PLACES_AND_REVIEWS",includeWebsite:!0,includePhoneNumber:!0,language:"en",countryCode:"US"}};case"SPECIALTY_RETAIL":return{actorId:"compass/crawler-google-places",input:{searchStringsArray:[`specialty retail stores ${i}`,`boutique shops ${i}`,`local retailers ${i}`],maxCrawledPlacesPerSearch:10,language:"en",country:"us",includeHistogram:!1,includeOpeningHours:!1,includeImages:!1,skipClosedPlaces:!0}};case"BUSINESS_SERVICES":return{actorId:"apify/google-maps-scraper",input:{queries:[`business services in ${i}`,`consulting firms in ${i}`,`professional services in ${i}`],maxPlacesPerQuery:10,searchMode:"PLACES_AND_REVIEWS",includeWebsite:!0,includePhoneNumber:!0,language:"en",countryCode:"US"}};default:return{actorId:"compass/crawler-google-places",input:{searchStringsArray:[`${e.toLowerCase().replace(/_/g," ")} in ${i}`],maxCrawledPlacesPerSearch:30,language:"en",country:"us"}}}})();console.log(`Using actor ${a.actorId} for ${e} search in ${i}`);let t=await s.actor(a.actorId).call(a.input,{timeout:300}),r=[];return r=(r="apify/google-maps-scraper"===a.actorId?(t.items||[]).map(e=>({title:e.title,address:e.address,phoneNumber:e.phoneNumber,website:e.website,categoryName:e.categoryName||e.category,totalScore:e.rating,reviewsCount:e.reviewsCount,location:e.location,placeId:e.placeId,priceLevel:e.priceLevel,permanently_closed:e.permanently_closed,temporarily_closed:e.temporarily_closed})):(t.items||[]).map(e=>({title:e.title,address:e.address,phoneNumber:e.phoneNumber,website:e.website,categoryName:e.categoryName,totalScore:e.totalScore,reviewsCount:e.reviewsCount,location:e.location,placeId:e.placeId}))).filter(e=>!e.permanently_closed&&!e.temporarily_closed),console.log(`Found ${r.length} ${e} businesses in ${i}`),r}catch(i){throw console.error(`Actor failed for ${e}:`,i),i}}async function f(e,i,s,a=2){for(let r=0;r<=a;r++)try{let n=await E(e,i,s);if(n.length>0)return n;if(r<a){var t;(t=(t=i).trim()).includes(",")||(t=`${t}, USA`),i=t,console.log(`Retry ${r+1}: Searching with location: ${i}`)}}catch(e){if(r===a)throw e;console.log(`Attempt ${r+1} failed, retrying...`)}return[]}async function S(e,i){let s=!1,a=null,t="";if(!e.industryCategory||"all"===e.industryCategory){console.log("No specific industry category provided - using mock data");let i=C(e);return{businesses:i,totalResults:i.length,searchCriteria:e,dataSource:"mock",message:"Please select a specific industry category for accurate results"}}if(i){let{client:e,hasValidKey:r}=await m(i);r&&e?(a=e,s=!0,t="Using your personal Apify API key for live data"):t="No valid API key configured - using sample data"}if(!a&&g&&(a=g,s=!0,t="Using system Apify API key for live data"),!a){console.log("No Apify client available, using mock data");let i=C(e);return{businesses:i,totalResults:i.length,searchCriteria:e,dataSource:"mock",message:t||"No API key configured - using sample data for demonstration"}}try{console.log("Starting STRICT Apify search with criteria:",e),console.log("Target industry category:",e.industryCategory),console.log(`Starting multi-actor search for ${e.industryCategory} in ${e.location}`);let i=await f(e.industryCategory,e.location,a);if(console.log(`Multi-actor search completed: ${i.length} items retrieved`),!i||0===i.length)return{businesses:[],totalResults:0,searchCriteria:e,dataSource:s?"live":"mock",message:"No businesses found in this area"};let r=i.filter(e=>e&&e.title&&e.address).map((i,s)=>{let a={title:i.title||"",address:i.address||"",phone:i.phoneNumber||i.phone,website:i.website||i.url,category:i.categoryName,rating:i.totalScore||i.rating,reviewsCount:i.reviewsCount||0,location:i.location,placeId:i.placeId,hours:i.openingHours,description:i.description,imageUrl:i.imageUrl},t=function(e,i=[],s){let a=`${e} ${i.join(" ")}`.toLowerCase();for(let e of["web design","web development","website","digital agency","seo","software","verizon","at&t","sprint","tmobile","phone service","internet provider","bank","credit union","mortgage","loan company","construction","plumbing","electrical","hvac","roofing","landscaping","government","municipal","city hall","courthouse","post office","dmv","medical equipment","medical supplies","pharmaceutical distributor","wholesale","distributor","warehouse","logistics"])if(a.includes(e))return null;switch(s){case"AUTOMOTIVE_SERVICES":return function(e){if(!["auto","car","vehicle","automotive","tire","brake","oil change","mechanic","garage","transmission","muffler","body shop"].some(i=>e.includes(i)))return null;for(let i of["auto insurance","car insurance","auto loan","car loan","auto sales","car dealership","used cars","car lot"])if(e.includes(i))return null;return e.includes("tire")?{businessType:"TIRE_SHOP",industryCategory:"AUTOMOTIVE_SERVICES",displayName:"Tire Shop"}:e.includes("oil change")||e.includes("quick lube")?{businessType:"OIL_CHANGE",industryCategory:"AUTOMOTIVE_SERVICES",displayName:"Oil Change"}:e.includes("car wash")||e.includes("auto wash")?{businessType:"CAR_WASH",industryCategory:"AUTOMOTIVE_SERVICES",displayName:"Car Wash"}:e.includes("body shop")||e.includes("collision")?{businessType:"BODY_SHOP",industryCategory:"AUTOMOTIVE_SERVICES",displayName:"Body Shop"}:e.includes("transmission")?{businessType:"TRANSMISSION_REPAIR",industryCategory:"AUTOMOTIVE_SERVICES",displayName:"Transmission Repair"}:e.includes("brake")?{businessType:"BRAKE_SERVICE",industryCategory:"AUTOMOTIVE_SERVICES",displayName:"Brake Service"}:e.includes("muffler")||e.includes("exhaust")?{businessType:"MUFFLER_SHOP",industryCategory:"AUTOMOTIVE_SERVICES",displayName:"Muffler Shop"}:e.includes("detailing")?{businessType:"AUTO_DETAILING",industryCategory:"AUTOMOTIVE_SERVICES",displayName:"Auto Detailing"}:{businessType:"AUTO_REPAIR",industryCategory:"AUTOMOTIVE_SERVICES",displayName:"Auto Repair"}}(a);case"RESTAURANT_FOOD_SERVICE":return["restaurant","dining","food","cafe","coffee","bakery","pizza","bar","grill","bistro","eatery","kitchen","catering"].some(e=>a.includes(e))?a.includes("coffee")||a.includes("cafe")||a.includes("espresso")?{businessType:"COFFEE_SHOP",industryCategory:"RESTAURANT_FOOD_SERVICE",displayName:"Coffee Shop"}:a.includes("bakery")||a.includes("pastry")||a.includes("donut")?{businessType:"BAKERY",industryCategory:"RESTAURANT_FOOD_SERVICE",displayName:"Bakery"}:a.includes("pizza")?{businessType:"PIZZA_RESTAURANT",industryCategory:"RESTAURANT_FOOD_SERVICE",displayName:"Pizza Restaurant"}:a.includes("bar")||a.includes("pub")||a.includes("tavern")?{businessType:"BAR_GRILL",industryCategory:"RESTAURANT_FOOD_SERVICE",displayName:"Bar & Grill"}:a.includes("catering")?{businessType:"CATERING",industryCategory:"RESTAURANT_FOOD_SERVICE",displayName:"Catering"}:a.includes("fast")||a.includes("quick")||a.includes("drive")?{businessType:"FAST_FOOD",industryCategory:"RESTAURANT_FOOD_SERVICE",displayName:"Fast Food"}:a.includes("fine")||a.includes("upscale")||a.includes("steakhouse")?{businessType:"FINE_DINING",industryCategory:"RESTAURANT_FOOD_SERVICE",displayName:"Fine Dining"}:{businessType:"CASUAL_DINING",industryCategory:"RESTAURANT_FOOD_SERVICE",displayName:"Casual Dining"}:null;case"HEALTHCARE":return a.includes("dental")||a.includes("dentist")?{businessType:"DENTAL_PRACTICE",industryCategory:"HEALTHCARE",displayName:"Dental Practice"}:a.includes("veterinary")||a.includes("animal hospital")||a.includes("vet ")?{businessType:"VETERINARY_CLINIC",industryCategory:"HEALTHCARE",displayName:"Veterinary Clinic"}:a.includes("medical")||a.includes("doctor")||a.includes("physician")?{businessType:"MEDICAL_OFFICE",industryCategory:"HEALTHCARE",displayName:"Medical Office"}:a.includes("pharmacy")||a.includes("drugstore")?{businessType:"PHARMACY",industryCategory:"HEALTHCARE",displayName:"Pharmacy"}:null;case"BEAUTY_WELLNESS":return a.includes("hair salon")||a.includes("beauty salon")?{businessType:"HAIR_SALON",industryCategory:"BEAUTY_WELLNESS",displayName:"Hair Salon"}:a.includes("nail salon")||a.includes("manicure")?{businessType:"NAIL_SALON",industryCategory:"BEAUTY_WELLNESS",displayName:"Nail Salon"}:a.includes("spa")||a.includes("wellness")?{businessType:"SPA_WELLNESS",industryCategory:"BEAUTY_WELLNESS",displayName:"Spa & Wellness"}:a.includes("barber")?{businessType:"BARBERSHOP",industryCategory:"BEAUTY_WELLNESS",displayName:"Barbershop"}:null;case"FITNESS_RECREATION":return a.includes("gym")||a.includes("fitness")?{businessType:"GYM_FITNESS",industryCategory:"FITNESS_RECREATION",displayName:"Gym & Fitness"}:a.includes("yoga")?{businessType:"YOGA_STUDIO",industryCategory:"FITNESS_RECREATION",displayName:"Yoga Studio"}:null;case"PET_SERVICES":return a.includes("pet grooming")||a.includes("dog grooming")?{businessType:"PET_GROOMING",industryCategory:"PET_SERVICES",displayName:"Pet Grooming"}:a.includes("pet store")||a.includes("pet shop")?{businessType:"PET_STORE",industryCategory:"PET_SERVICES",displayName:"Pet Store"}:null;case"SPECIALTY_RETAIL":return a.includes("boutique")||a.includes("clothing")?{businessType:"BOUTIQUE_CLOTHING",industryCategory:"SPECIALTY_RETAIL",displayName:"Boutique Clothing"}:a.includes("jewelry")?{businessType:"JEWELRY_STORE",industryCategory:"SPECIALTY_RETAIL",displayName:"Jewelry Store"}:null;case"BUSINESS_SERVICES":return a.includes("accounting")||a.includes("bookkeeping")||a.includes("cpa")?{businessType:"ACCOUNTING_SERVICES",industryCategory:"BUSINESS_SERVICES",displayName:"Accounting Services"}:a.includes("law")||a.includes("attorney")||a.includes("lawyer")?{businessType:"LEGAL_SERVICES",industryCategory:"BUSINESS_SERVICES",displayName:"Legal Services"}:a.includes("real estate")||a.includes("realtor")?{businessType:"REAL_ESTATE",industryCategory:"BUSINESS_SERVICES",displayName:"Real Estate"}:null;default:return null}}(i.title||"",i.categories||[i.categoryName],e.industryCategory);if(!t)return console.log(`STRICT FILTER: Excluding "${i.title}" - failed industry validation for ${e.industryCategory}`),null;if(t.industryCategory!==e.industryCategory)return console.log(`STRICT FILTER: Excluding "${i.title}" - category mismatch (${t.industryCategory} vs ${e.industryCategory})`),null;let r=function(e,i){let s={revenueQualified:(e.reviewsCount||0)>10,experienceQualified:(e.reviewsCount||0)>5,locationQualified:!e.address||e.address.includes("USA")||e.address.includes("US")||/,\s*[A-Z]{2}\s+\d{5}/.test(e.address),industryQualified:!0},a=25*Object.values(s).filter(Boolean).length;return{indicators:s,score:a,isQualified:a>=75}}(a,t.businessType);return{id:`apify-${i.placeId||s}-${Date.now()}`,name:a.title,address:a.address,phone:a.phone,businessType:t.displayName,industryCategory:t.industryCategory,estimatedRevenue:function(e=0,i=0){let s=.1*e+5*i;return s>50?"$50K-100K monthly":s>30?"$30K-60K monthly":s>20?"$25K-50K monthly":s>10?"$20K-35K monthly":"$15K-25K monthly"}(a.reviewsCount,a.rating),yearsInBusiness:function(e=0){return e>200?"5+ years":e>100?"4 years":e>50?"3 years":e>20?"2 years":e>5?"1.5 years":"1 year"}(a.reviewsCount),employeeCount:function(e=0){return e>100?"15-25 employees":e>50?"10-15 employees":e>20?"8-12 employees":e>5?"6-10 employees":"4-8 employees"}(a.reviewsCount),website:a.website,qualificationIndicators:r.indicators,qualificationScore:r.score,isQualified:r.isQualified}}).filter(e=>null!==e);return console.log(`STRICT FILTERING: ${i.length} raw results -> ${r.length} validated ${e.industryCategory} businesses`),{businesses:r,totalResults:r.length,searchCriteria:e,dataSource:"live",message:t||`Found ${r.length} verified ${e.industryCategory.toLowerCase().replace("_"," ")} businesses using strict validation`}}catch(s){console.error("Error in Apify search:",s);let i=C(e);return{businesses:i,totalResults:i.length,searchCriteria:e,dataSource:"mock",message:`Live data failed - using sample data (Error: ${s instanceof Error?s.message:"Unknown error"})`}}}function C(e){let i=[{id:"healthcare-1",name:"Family Health Clinic",address:`456 Healthcare Ave, ${e.location}`,phone:"(555) 555-0123",businessType:"Medical Office",industryCategory:"HEALTHCARE",estimatedRevenue:"$25K-50K monthly",yearsInBusiness:"3 years",employeeCount:"8-12 employees",website:"https://familyhealthclinic.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:85,isQualified:!0},{id:"healthcare-2",name:"Sunshine Dental Group",address:`789 Smile Street, ${e.location}`,phone:"(555) 555-0456",businessType:"Dental Practice",industryCategory:"HEALTHCARE",estimatedRevenue:"$30K-60K monthly",yearsInBusiness:"5 years",employeeCount:"10-15 employees",website:"https://sunshinedentalgroup.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:92,isQualified:!0},{id:"healthcare-3",name:"Premier Animal Hospital",address:`321 Pet Care Blvd, ${e.location}`,phone:"(555) 555-0789",businessType:"Veterinary Clinic",industryCategory:"HEALTHCARE",estimatedRevenue:"$40K-70K monthly",yearsInBusiness:"8 years",employeeCount:"12-18 employees",website:"https://premieranimalhospital.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:95,isQualified:!0},{id:"automotive-1",name:"Mike's Auto Repair",address:`890 Mechanic Lane, ${e.location}`,phone:"(555) 555-0654",businessType:"Auto Repair",industryCategory:"AUTOMOTIVE_SERVICES",estimatedRevenue:"$20K-40K monthly",yearsInBusiness:"6 years",employeeCount:"8-12 employees",website:"https://mikesautorepair.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:86,isQualified:!0},{id:"automotive-2",name:"QuickLube Express",address:`445 Service Road, ${e.location}`,phone:"(555) 555-0987",businessType:"Oil Change",industryCategory:"AUTOMOTIVE_SERVICES",estimatedRevenue:"$15K-25K monthly",yearsInBusiness:"3 years",employeeCount:"6-8 employees",website:"https://quicklubeexpress.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:78,isQualified:!0},{id:"automotive-3",name:"Pro Tire Center",address:`667 Tire Street, ${e.location}`,phone:"(555) 555-0321",businessType:"Tire Shop",industryCategory:"AUTOMOTIVE_SERVICES",estimatedRevenue:"$30K-50K monthly",yearsInBusiness:"4 years",employeeCount:"10-14 employees",website:"https://protirecenter.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:82,isQualified:!0},{id:"restaurant-1",name:"Tony's Italian Bistro",address:`123 Main Street, ${e.location}`,phone:"(555) 555-0789",businessType:"Casual Dining",industryCategory:"RESTAURANT_FOOD_SERVICE",estimatedRevenue:"$35K-65K monthly",yearsInBusiness:"4 years",employeeCount:"15-20 employees",website:"https://tonysitalianbistro.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:88,isQualified:!0},{id:"restaurant-2",name:"Corner Coffee House",address:`234 Coffee Lane, ${e.location}`,phone:"(555) 555-0456",businessType:"Coffee Shop",industryCategory:"RESTAURANT_FOOD_SERVICE",estimatedRevenue:"$20K-35K monthly",yearsInBusiness:"2 years",employeeCount:"8-12 employees",website:"https://cornercoffeehouse.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:75,isQualified:!0},{id:"restaurant-3",name:"Gino's Pizza Palace",address:`345 Pizza Plaza, ${e.location}`,phone:"(555) 555-0123",businessType:"Pizza Restaurant",industryCategory:"RESTAURANT_FOOD_SERVICE",estimatedRevenue:"$25K-45K monthly",yearsInBusiness:"7 years",employeeCount:"12-16 employees",website:"https://ginospizzapalace.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:90,isQualified:!0},{id:"beauty-1",name:"Bella Hair Studio",address:`567 Beauty Boulevard, ${e.location}`,phone:"(555) 555-0321",businessType:"Hair Salon",industryCategory:"BEAUTY_WELLNESS",estimatedRevenue:"$15K-30K monthly",yearsInBusiness:"2 years",employeeCount:"6-10 employees",website:"https://bellahairstudio.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:80,isQualified:!0},{id:"beauty-2",name:"Luxe Nail Spa",address:`678 Spa Street, ${e.location}`,phone:"(555) 555-0654",businessType:"Nail Salon",industryCategory:"BEAUTY_WELLNESS",estimatedRevenue:"$18K-32K monthly",yearsInBusiness:"3 years",employeeCount:"8-12 employees",website:"https://luxenailspa.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:83,isQualified:!0},{id:"fitness-1",name:"PowerFit Gym",address:`234 Fitness Street, ${e.location}`,phone:"(555) 555-0987",businessType:"Gym & Fitness",industryCategory:"FITNESS_RECREATION",estimatedRevenue:"$25K-55K monthly",yearsInBusiness:"3 years",employeeCount:"12-18 employees",website:"https://powerfitgym.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:83,isQualified:!0},{id:"pet-1",name:"Happy Tails Pet Grooming",address:`789 Pet Lane, ${e.location}`,phone:"(555) 555-0147",businessType:"Pet Grooming",industryCategory:"PET_SERVICES",estimatedRevenue:"$12K-22K monthly",yearsInBusiness:"2 years",employeeCount:"4-6 employees",website:"https://happytailsgrooming.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:76,isQualified:!0},{id:"business-1",name:"Thompson & Associates CPA",address:`890 Business Park Dr, ${e.location}`,phone:"(555) 555-0258",businessType:"Accounting Services",industryCategory:"BUSINESS_SERVICES",estimatedRevenue:"$40K-80K monthly",yearsInBusiness:"8 years",employeeCount:"15-25 employees",website:"https://thompsoncpa.com",qualificationIndicators:{revenueQualified:!0,experienceQualified:!0,locationQualified:!0,industryQualified:!0},qualificationScore:94,isQualified:!0}];if(!e.industryCategory||"all"===e.industryCategory)return console.log("MOCK DATA: No specific industry category requested - returning limited sample"),i.slice(0,6);let s=i.filter(i=>i.industryCategory===e.industryCategory);if(console.log(`MOCK DATA: Filtered to ${s.length} businesses for category ${e.industryCategory}`),e.industryTypes&&e.industryTypes.length>0){let i=s.filter(i=>{let s=i.businessType.toUpperCase().replace(/\s+/g,"_").replace(/&/g,"");return e.industryTypes.some(e=>e===s||i.businessType===e||i.businessType.includes(e))});return console.log(`MOCK DATA: Further filtered to ${i.length} businesses for specific types`),i}return s}var h=s(1313);let T="force-dynamic";async function I(e){try{let{searchParams:i}=new URL(e.url),s=i.get("location")||"",a=i.get("industryCategory")||"",t=i.get("industryTypes")||"",r=parseInt(i.get("radius")||"25");if(!s?.trim())return o.NextResponse.json({error:"Location is required"},{status:400});let n=[];t&&(n=t.split(",").map(e=>e.trim()).filter(Boolean));let u={location:s.trim(),industryTypes:n,industryCategory:"all"!==a?a:void 0,radius:r};console.log("API: Starting multi-industry business search with criteria:",u);let l=await (0,h.vz)();console.log("API: Using user email:",l);let c=await S(u,l);return console.log(`API: Found ${c.businesses.length} businesses using ${c.dataSource} data`),o.NextResponse.json({success:!0,data:{businesses:c.businesses,searchCriteria:c.searchCriteria,totalResults:c.totalResults,dataSource:c.dataSource,message:c.message,source:"live"===c.dataSource?"apify":"mock"}})}catch(i){console.error("Error searching businesses:",i);let e=i instanceof Error?i.message:"Unknown error occurred";return o.NextResponse.json({error:"Failed to search businesses",details:e,fallback:!0},{status:500})}}let A=new t.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/prospects/search/route",pathname:"/api/prospects/search",filename:"route",bundlePath:"app/api/prospects/search/route"},resolvedPagePath:"/home/ubuntu/ccc_healthcare_pipeline/app/app/api/prospects/search/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:R,staticGenerationAsyncStorage:b,serverHooks:N}=A,_="/api/prospects/search/route";function v(){return(0,n.patchFetch)({serverHooks:N,staticGenerationAsyncStorage:b})}},1313:(e,i,s)=>{s.d(i,{vz:()=>t});let a=new(s(53524)).PrismaClient;async function t(){try{let e=await a.user.findFirst({select:{email:!0},orderBy:{createdAt:"asc"}});return e?.email||"john@doe.com"}catch(e){return console.error("Error fetching current user email:",e),"john@doe.com"}}}};var i=require("../../../../webpack-runtime.js");i.C(e);var s=e=>i(i.s=e),a=i.X(0,[276,972,291],()=>s(19606));module.exports=a})();